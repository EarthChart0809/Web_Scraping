## 植物育成難易度評価システム
植物の栽培に関する情報を自動分析し、育成の難易度を評価するWebアプリケーションです。

## 概要
このシステムは、植物の育成に関するテキストデータを重み付きキーワード解析により自動評価し、初心者から上級者まで分かりやすい難易度レベルで表示します。

## ファイルの詳細
## ファイルの詳細

### データ収集関連

#### `get_urls.py`
- **機能**: LOVEGREENサイトから植物URLを収集
- **対象カテゴリ**: 野菜、果樹、花の3カテゴリ
- **出力**: `all_plants_urls.csv` (植物名、URL、カテゴリ情報)
- **特徴**: 
  - Seleniumを使用した動的ページ対応
  - 重複除去機能
  - カテゴリ別統計表示
  - 除外パターン設定（検索ページ、タグページ等を除外）

#### `web_scraping.py`
- **機能**: CSVファイルのURLから植物詳細情報をスクレイピング
- **入力**: `all_plants_urls.csv`
- **出力**: `all_plants_data.json`
- **取得データ**: 
  - 植物の基本情報
  - 栽培方法
  - 特徴・注意点
  - その他の詳細情報
- **特徴**: 
  - エラーハンドリング機能
  - 進捗表示
  - レート制限対応

### 評価エンジン

#### `Growability_Assessment.py`
- **機能**: 植物育成難易度の自動評価システム
- **主要関数**:
  - `score_grow_ease()`: 重み付きキーワード解析
  - `assess_plant_growability()`: 個別植物評価
  - `assess_all_plants()`: 全植物一括評価
  - `load_plant_data()`: JSONデータ読み込み
- **評価システム**:
  - 0-10点スコア
  - 5段階評価レベル
  - 重み付きキーワード（±1.0〜±3.0）
  - マッチキーワード詳細表示

### Webアプリケーション

#### `app.py`
- **機能**: Flask Webアプリケーションのメインファイル
- **エンドポイント**: 
  - `GET /`: 初期画面表示
  - `POST /`: 評価実行・結果表示
- **特徴**: 
  - シンプルなワンページアプリ
  - エラーハンドリング
  - JSONデータ自動読み込み

#### `templates/index.html`
- **機能**: Webアプリケーションのフロントエンド
- **特徴**: 
  - Bootstrap使用のレスポンシブデザイン
  - 評価結果テーブル表示
  - カテゴリ別色分け
  - スコア順ソート機能

###  データファイル

#### `all_plants_urls.csv`
```csv
name,url,category
トマト,https://lovegreen.net/library/vegetables/tomato,野菜
```
- **内容**: 収集した植物URL一覧
- **フィールド**: 植物名、URL、カテゴリ

#### `all_plants_data.json`
```json
{
  "植物名": [
    "植物の特徴や育て方の説明文1",
    "植物の特徴や育て方の説明文2"
  ]
}
```
- **内容**: スクレイピングした植物詳細情報
- **形式**: 植物名をキーとした説明文配列

### 設定・依存関係

#### 必要なライブラリ
```bash
pip install flask selenium beautifulsoup4 webdriver-manager pandas
```

#### Chrome WebDriver
- `webdriver-manager`により自動ダウンロード
- 手動設定不要

### プロジェクト構成
```
Web_Scraping/
├── README.md                    # プロジェクト説明
├── get_urls.py                  # URL収集スクリプト
├── web_scraping.py              # データスクレイピング
├── Growability_Assessment.py    # 評価エンジン
├── app.py                       # Webアプリケーション
├── templates/
│   └── index.html              # HTMLテンプレート
├── all_plants_urls.csv         # 収集URL一覧
└── all_plants_data.json        # 植物詳細データ
```

### カスタマイズポイント

#### キーワード重みの調整
`Growability_Assessment.py`の辞書を編集：
```python
easy_keywords = {
    "育てやすい": 3.0,  # 重みを調整
    "簡単": 2.5,        # 新しいキーワード追加
}
```

#### スクレイピング対象の変更
`get_urls.py`のカテゴリ設定を編集：
```python
plant_categories = [
    {
        "name": "新カテゴリ",
        "type": "new-category",
        "url_base": "https://example.com/",
        "max_pages": 10
    }
]
```

#### 評価基準の変更
`assess_plant_growability()`関数のスコア閾値を調整

## 実際の動作の手順
## 実際の動作の手順

### ステップ1: 環境準備
```bash
# 必要なライブラリをインストール
pip install flask selenium beautifulsoup4 webdriver-manager pandas
```

### ステップ2: URL収集 🕷️
```bash
python get_urls.py
```
- **処理内容**: LOVEGREENサイトから植物URLを収集
- **対象カテゴリ**: 野菜（14ページ）、果樹（5ページ）、花（62ページ）
- **生成ファイル**: `all_plants_urls.csv`
- **実行時間**: 約10-15分
- **出力例**:
  ```
   カテゴリ別統計:
    野菜: 200件
    果樹: 80件
    花: 400件
   完了：680件の植物データを all_plants_urls.csv に保存しました
  ```

### ステップ3: 詳細情報スクレイピング 
```bash
python web_scraping.py
```
- **処理内容**: CSVファイルのURLから植物詳細情報を取得
- **入力**: `all_plants_urls.csv`
- **生成ファイル**: `all_plants_data.json`
- **実行時間**: 約30-60分（データ量による）
- **取得内容**: 植物の特徴、栽培方法、育て方のコツ等
- **注意**: レート制限により時間がかかります

### ステップ4: Webアプリケーション起動 
```bash
python app.py
```
- **前提条件**: `all_plants_data.json`が同一フォルダに存在すること
- **アクセスURL**: `http://localhost:5000`
- **動作確認**: ブラウザでページが表示されることを確認

### ステップ5: 評価実行 
1. ブラウザで `http://localhost:5000` にアクセス
2. **「評価開始」ボタン**をクリック
3. システムが全植物データを自動解析（数秒〜数分）
4. 評価結果がスコア順で表示される

### 出力結果の見方

#### 評価結果テーブル
| 植物名 | カテゴリ | 評価レベル | スコア | 詳細 |
|--------|----------|------------|--------|------|
| トマト | 野菜 | とても育てやすい | 8.5点 | 初心者向け |
| バラ | 花 | やや難しい | 2.8点 | 管理が必要 |

#### 評価レベルの意味
- **とても育てやすい** (8.0-10.0点): 🟢 初心者に最適
- **育てやすい** (6.0-7.9点): 🔵 初心者向け
- **普通** (4.0-5.9点): 🟡 基本知識必要
- **やや難しい** (2.0-3.9点): 🟠 経験者向け
- **難しい** (0.0-1.9点): 🔴 上級者向け

### ⚠️ トラブルシューティング

#### よくある問題と解決方法

**1. `get_urls.py`でエラーが発生する場合**
```bash
# ChromeDriverの問題の場合
pip install --upgrade webdriver-manager
```

**2. `all_plants_data.json`が見つからないエラー**
- ファイルが`app.py`と同じフォルダにあるか確認
- ファイル名が正確か確認（`all_plants_data.json`）

**3. Webページが表示されない場合**
- ポート5000が使用されていないか確認
- ファイアウォール設定を確認

**4. 評価結果が表示されない場合**
- ブラウザのコンソールでエラーを確認
- JSONファイルの形式が正しいか確認

### 実行時のコツ

#### 効率的な実行方法
1. **段階的実行**: 各ステップの完了を確認してから次へ
2. **データ保存**: 中間ファイル（CSV、JSON）をバックアップ
3. **ログ確認**: 各スクリプトの出力メッセージを確認
4. **時間管理**: スクレイピングは時間がかかるため、余裕を持って実行

#### パフォーマンス向上
```python
# get_urls.pyで処理ページ数を制限（テスト用）
"max_pages": 3  # 全ページではなく3ページのみ処理
```

### 定期実行の設定

最新データで定期的に更新する場合：
```bash
# cronジョブ設定例（毎週実行）
0 2 * * 0 cd /path/to/project && python get_urls.py && python web_scraping.py
```

この手順に従うことで、植物育成難易度評価システムを確実に動作させることができます。